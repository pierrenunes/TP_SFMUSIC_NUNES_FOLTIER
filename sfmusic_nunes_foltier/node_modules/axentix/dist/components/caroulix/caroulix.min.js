var Nt=Object.defineProperty;var Xt=(h,r,l)=>r in h?Nt(h,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):h[r]=l;var G=(h,r,l)=>(Xt(h,typeof r!="symbol"?r+"":r,l),l),ot=(h,r,l)=>{if(!r.has(h))throw TypeError("Cannot "+l)};var e=(h,r,l)=>(ot(h,r,"read from private field"),l?l.call(h):r.get(h)),a=(h,r,l)=>{if(r.has(h))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(h):r.set(h,l)},o=(h,r,l,g)=>(ot(h,r,"write to private field"),g?g.call(h,l):r.set(h,l),l),at=(h,r,l,g)=>({set _(J){o(h,r,J,l)},get _(){return e(h,r,g)}}),c=(h,r,l)=>(ot(h,r,"access private method"),l);(function(h,r){typeof exports=="object"&&typeof module!="undefined"?module.exports=r():typeof define=="function"&&define.amd?define(r):(h=typeof globalThis!="undefined"?globalThis:h||self,h.Caroulix=r())})(this,function(){var T,b,d,C,S,D,N,O,x,X,A,E,I,R,$,k,P,m,z,H,v,U,f,K,ft,Q,vt,B,rt,y,M,q,it,V,xt,_,gt,j,mt,tt,yt,et,Lt,W,ht,F,st,Z,lt;"use strict";const h="",r=[],l={components:[],plugins:[],prefix:"ax",mode:""},g=i=>l.components.find(n=>n.name===i).class,J=()=>{const i=l.components.filter(t=>t.dataDetection),n=l.plugins.filter(t=>t.dataDetection);return[...i,...n].map(t=>t.name)},bt=(i,n)=>{if(!i.name||!i.class){console.error(`[Axentix] Error registering ${n} : Missing required parameters.`);return}if(l[n].some(t=>t.name===i.name)){console.error(`[Axentix] Error registering ${n} : Already exist.`);return}i.autoInit&&(i.autoInit.selector=i.autoInit.selector+=":not(.no-axentix-init)"),l[n].push(i)},Et=i=>{bt(i,"components")},It=i=>i.replace(/[\w]([A-Z])/g,n=>n[0]+"-"+n[1]).toLowerCase(),wt=(i,n="")=>{const t=It(i);return n?n+"-"+t:t},Tt=(i,n,t,s,p="")=>{const u=n[0].toUpperCase()+n.slice(1).toLowerCase();J().includes(u)&&t!=="Collapsible"&&u!=="Sidenav"&&(i[n]=g(u).getDefaultOptions());const L=p?p+"-"+n:n,Y=ct(i[n],t,s,L);if(!(Object.keys(Y).length===0&&i.constructor===Object))return Y},ct=(i,n,t,s="")=>Object.keys(i).reduce((p,u)=>{if(typeof i[u]=="object"&&i[u]!==null){const L=Tt(i,u,n,t,s);L&&(p[u]=L)}else if(i[u]!==null){const L="data-"+n.toLowerCase()+"-"+wt(u,s);if(t.hasAttribute(L)){const Y=t.getAttribute(L);p[u]=typeof i[u]=="number"?Number(Y):Y,typeof i[u]=="boolean"&&(p[u]=Y==="true")}}return p},{}),Ct=(i,n)=>{const t=Object.assign({},g(i).getDefaultOptions());return ct(t,i,n)},Dt=()=>{document.querySelectorAll("[data-ax]").forEach(n=>{let t=n.dataset.ax;if(t=t[0].toUpperCase()+t.slice(1).toLowerCase(),!J().includes(t)){console.error(`[Axentix] Error: ${t} component doesn't exist. 
 Did you forget to register him ?`,n);return}try{const s=g(t);new s(`#${n.id}`)}catch(s){console.error("[Axentix] Data: Unable to load "+t,s)}})},Ot=()=>{try{new Axentix.Axentix("all")}catch(i){console.error("[Axentix] Unable to auto init.",i)}};document.addEventListener("DOMContentLoaded",()=>{document.documentElement.dataset.axentix&&Ot(),Dt()});const dt=(...i)=>i.reduce((n,t)=>{for(let s in t)n[s]=typeof t[s]=="object"&&t[s]!==null?dt(n[s],t[s]):t[s];return n},{}),At=(i,n,t)=>dt(g(i).getDefaultOptions(),Ct(i,t),n),w=(i,n,t)=>{const s=new CustomEvent("ax."+n,{detail:t||{},bubbles:!0});i.dispatchEvent(s)},Rt=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,$t=()=>!!window.PointerEvent&&"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>=0,kt=()=>Rt()?"touch":$t()?"pointer":"mouse",Pt=i=>{const n=r.find(t=>t.type!=="Toast"&&"#"+t.instance.el.id===i);return n?n.instance:!1},ut=i=>i.targetTouches&&i.targetTouches.length>=1?i.targetTouches[0].clientY:i.changedTouches&&i.changedTouches.length>=1?i.changedTouches[0].pageY:i.clientY,pt=i=>i.targetTouches&&i.targetTouches.length>=1?i.targetTouches[0].clientX:i.changedTouches&&i.changedTouches.length>=1?i.changedTouches[0].pageX:i.clientX;class Mt{constructor(){G(this,"el")}removeListeners(){}setupListeners(){}setup(){}preventDbInstance(n){if(n&&Pt(n))throw new Error(`Instance already exist on ${n}`)}sync(){w(this.el,"component.sync"),this.removeListeners(),this.setupListeners()}reset(){w(this.el,"component.reset"),this.removeListeners(),this.setup()}destroy(){w(this.el,"component.destroy"),this.removeListeners();const n=r.findIndex(t=>t.instance.el.id===this.el.id);r.splice(n,1)}}const St={animationDuration:500,height:"",backToOpposite:!0,enableTouch:!0,indicators:{enabled:!1,isFlat:!1,customClasses:""},autoplay:{enabled:!0,interval:5e3,side:"right"}};class nt extends Mt{constructor(t,s){super();a(this,K);a(this,Q);a(this,B);a(this,y);a(this,q);a(this,V);a(this,_);a(this,j);a(this,tt);a(this,et);a(this,W);a(this,F);a(this,Z);G(this,"options");G(this,"activeIndex");a(this,T,0);a(this,b,!1);a(this,d,void 0);a(this,C,0);a(this,S,0);a(this,D,!1);a(this,N,!1);a(this,O,!1);a(this,x,0);a(this,X,0);a(this,A,void 0);a(this,E,void 0);a(this,I,void 0);a(this,R,void 0);a(this,$,void 0);a(this,k,void 0);a(this,P,void 0);a(this,m,void 0);a(this,z,0);a(this,H,0);a(this,v,void 0);a(this,U,void 0);a(this,f,void 0);try{this.preventDbInstance(t),r.push({type:"Caroulix",instance:this}),this.el=document.querySelector(t),this.options=At("Caroulix",s,this.el),this.setup()}catch(p){console.error("[Axentix] Caroulix init error",p)}}setup(){w(this.el,"caroulix.setup"),this.options.autoplay.side=this.options.autoplay.side.toLowerCase(),["right","left"].includes(this.options.autoplay.side)||(this.options.autoplay.side="right"),this.activeIndex=0,o(this,T,0),o(this,b,!1),o(this,f,kt()),o(this,d,c(this,K,ft).call(this)),this.options.indicators.enabled&&c(this,tt,yt).call(this);const s=this.el.querySelector(".active");s?this.activeIndex=e(this,d).indexOf(s):e(this,d)[0].classList.add("active"),c(this,Q,vt).call(this),e(this,C)===0&&c(this,q,it).call(this),this.setupListeners(),this.options.autoplay.enabled&&this.play()}setupListeners(){o(this,A,c(this,q,it).bind(this)),window.addEventListener("resize",e(this,A)),e(this,I)&&(o(this,R,this.next.bind(this,1)),e(this,I).addEventListener("click",e(this,R))),e(this,E)&&(o(this,$,this.prev.bind(this,1)),e(this,E).addEventListener("click",e(this,$))),this.options.enableTouch&&(o(this,k,c(this,V,xt).bind(this)),o(this,P,c(this,_,gt).bind(this)),o(this,m,c(this,j,mt).bind(this)),this.el.addEventListener(`${e(this,f)}${e(this,f)==="touch"?"start":"down"}`,e(this,k)),this.el.addEventListener(`${e(this,f)}move`,e(this,P)),this.el.addEventListener(`${e(this,f)}${e(this,f)==="touch"?"end":"up"}`,e(this,m)),this.el.addEventListener(e(this,f)==="pointer"?"pointerleave":"mouseleave",e(this,m)))}removeListeners(){window.removeEventListener("resize",e(this,A)),o(this,A,void 0),e(this,I)&&(e(this,I).removeEventListener("click",e(this,R)),o(this,R,void 0)),e(this,E)&&(e(this,E).removeEventListener("click",e(this,$)),o(this,$,void 0)),this.options.enableTouch&&(this.el.removeEventListener(`${e(this,f)}${e(this,f)==="pointer"?"down":"start"}`,e(this,k)),this.el.removeEventListener(`${e(this,f)}move`,e(this,P)),this.el.removeEventListener(`${e(this,f)}${e(this,f)==="touch"?"end":"up"}`,e(this,m)),this.el.removeEventListener(e(this,f)==="pointer"?"pointerleave":"mouseleave",e(this,m)),o(this,k,void 0),o(this,P,void 0),o(this,m,void 0))}goTo(t){if(t===this.activeIndex)return;(t>this.activeIndex?"right":"left")==="left"?this.prev(Math.abs(this.activeIndex-t)):this.next(Math.abs(this.activeIndex-t)),this.options.indicators.enabled&&c(this,W,ht).call(this)}play(){!this.options.autoplay.enabled||(this.stop(),o(this,U,setInterval(()=>{this.options.autoplay.side==="right"?this.next(1,!1):this.prev(1,!1)},this.options.autoplay.interval)))}stop(){!this.options.autoplay.enabled||clearInterval(e(this,U))}next(t=1,s=!0){e(this,D)||this.activeIndex===e(this,d).length-1&&!this.options.backToOpposite||(w(this.el,"caroulix.next",{step:t}),o(this,b,!0),s&&this.options.autoplay.enabled&&this.stop(),this.activeIndex<e(this,d).length-1?this.activeIndex+=t:this.options.backToOpposite&&(this.activeIndex=0),c(this,Z,lt).call(this),c(this,y,M).call(this),s&&this.options.autoplay.enabled&&this.play())}prev(t=1,s=!0){e(this,D)||this.activeIndex===0&&!this.options.backToOpposite||(w(this.el,"caroulix.prev",{step:t}),o(this,b,!0),s&&this.options.autoplay.enabled&&this.stop(),this.activeIndex>0?this.activeIndex-=t:this.options.backToOpposite&&(this.activeIndex=e(this,d).length-1),c(this,Z,lt).call(this),c(this,y,M).call(this),s&&this.options.autoplay.enabled&&this.play())}}return T=new WeakMap,b=new WeakMap,d=new WeakMap,C=new WeakMap,S=new WeakMap,D=new WeakMap,N=new WeakMap,O=new WeakMap,x=new WeakMap,X=new WeakMap,A=new WeakMap,E=new WeakMap,I=new WeakMap,R=new WeakMap,$=new WeakMap,k=new WeakMap,P=new WeakMap,m=new WeakMap,z=new WeakMap,H=new WeakMap,v=new WeakMap,U=new WeakMap,f=new WeakMap,K=new WeakSet,ft=function(){return Array.from(this.el.children).reduce((t,s)=>(s.classList.contains("caroulix-item")&&t.push(s),s.classList.contains("caroulix-prev")&&o(this,E,s),s.classList.contains("caroulix-next")&&o(this,I,s),t),[])},Q=new WeakSet,vt=function(){o(this,C,0),o(this,S,0),e(this,d).forEach(t=>{const s=t.querySelector("img, video");s&&(at(this,C)._++,s.complete?c(this,B,rt).call(this,s,!0):(s.loadRef=c(this,B,rt).bind(this,s),s.addEventListener("load",s.loadRef)))})},B=new WeakSet,rt=function(t,s){at(this,S)._++,s||(t.removeEventListener("load",t.loadRef),t.loadRef=void 0),e(this,C)==e(this,S)&&(c(this,q,it).call(this),c(this,y,M).call(this,!0))},y=new WeakSet,M=function(t=!1){const s=this.el.getBoundingClientRect().width;e(this,d).forEach((u,L)=>{u.style.transform=`translateX(${s*L-s*this.activeIndex-e(this,T)}px)`}),this.options.indicators.enabled&&c(this,W,ht).call(this),e(this,d).find(u=>u.classList.contains("active")).classList.remove("active"),e(this,d)[this.activeIndex].classList.add("active"),setTimeout(()=>{o(this,b,!1)},this.options.animationDuration),t&&setTimeout(()=>c(this,F,st).call(this,this.options.animationDuration),50)},q=new WeakSet,it=function(){if(o(this,D,!0),this.el.style.transitionDuration="",this.options.autoplay.enabled&&this.play(),this.options.height)this.el.style.height=this.options.height;else{const t=e(this,d).map(p=>p.offsetHeight),s=Math.max(...t);this.el.style.height=s+"px"}c(this,y,M).call(this),setTimeout(()=>{this.el.style.transitionDuration=this.options.animationDuration+"ms",o(this,D,!1)},50)},V=new WeakSet,xt=function(t){t.target.closest(".caroulix-arrow")||t.target.closest(".caroulix-indicators")||e(this,b)||(t.type!=="touchstart"&&t.preventDefault(),this.options.autoplay.enabled&&this.stop(),c(this,F,st).call(this,0),o(this,O,!0),o(this,N,!1),o(this,x,0),o(this,X,0),o(this,z,pt(t)),o(this,H,ut(t)))},_=new WeakSet,gt=function(t){if(!e(this,O)||e(this,N))return;let s=pt(t),p=ut(t);if(o(this,x,e(this,z)-s),o(this,X,Math.abs(e(this,H)-p)),t.type==="touchmove"&&e(this,X)>Math.abs(e(this,x)))return o(this,N,!0),o(this,x,0),!1;t.cancelable&&t.preventDefault(),o(this,T,e(this,x)),c(this,y,M).call(this)},j=new WeakSet,mt=function(t){if(!(t.target.closest(".caroulix-arrow")||t.target.closest(".caroulix-indicators"))&&(t.cancelable&&t.preventDefault(),e(this,O))){c(this,F,st).call(this,this.options.animationDuration);let s=this.el.getBoundingClientRect().width;o(this,O,!1);const p=s*15/100;this.activeIndex!==e(this,d).length-1&&e(this,x)>p?this.next():this.activeIndex!==0&&e(this,x)<-p&&this.prev(),o(this,x,0),o(this,T,0),c(this,y,M).call(this),this.options.autoplay.enabled&&this.play()}},tt=new WeakSet,yt=function(){o(this,v,document.createElement("ul")),e(this,v).classList.add("caroulix-indicators"),this.options.indicators.isFlat&&e(this,v).classList.add("caroulix-flat"),this.options.indicators.customClasses&&(e(this,v).className=`${e(this,v).className} ${this.options.indicators.customClasses}`);for(let t=0;t<e(this,d).length;t++){const s=document.createElement("li");s.triggerRef=c(this,et,Lt).bind(this,t),s.addEventListener("click",s.triggerRef),e(this,v).appendChild(s)}this.el.appendChild(e(this,v))},et=new WeakSet,Lt=function(t,s){s.preventDefault(),t!==this.activeIndex&&this.goTo(t)},W=new WeakSet,ht=function(){Array.from(e(this,v).children).forEach(t=>t.removeAttribute("class")),e(this,v).children[this.activeIndex].classList.add("active")},F=new WeakSet,st=function(t){this.el.style.transitionDuration=t+"ms"},Z=new WeakSet,lt=function(){w(this.el,"caroulix.slide",{nextElement:e(this,d)[this.activeIndex],currentElement:e(this,d)[e(this,d).findIndex(t=>t.classList.contains("active"))]})},G(nt,"getDefaultOptions",()=>St),Et({class:nt,name:"Caroulix",dataDetection:!0,autoInit:{enabled:!0,selector:".caroulix"}}),nt});
